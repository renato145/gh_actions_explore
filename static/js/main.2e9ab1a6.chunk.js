(this.webpackJsonpperu_news=this.webpackJsonpperu_news||[]).push([[0],{58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n(0),a=n.n(r),s=n(13),i=n.n(s),o=n(10),u=n(33),l=n(62),d=n(61),f={enabled:!1,retry:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,cacheTime:36e5},j=n(60),b=n(12),m=n.n(b),O=n(30),h=n(6),x=n(31),p=n.n(x),v=function(e){return Object.entries(e).map((function(e){var t=Object(h.a)(e,2),n=t[0],c=t[1];return[n,Object.entries(c)]}))},g=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c,r,a,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.date,console.log("fetching summary data ".concat(t," ").concat(c)),e.next=4,new Promise((function(e){return setTimeout(e,2e3)}));case 4:return r="".concat("https://raw.githubusercontent.com/renato145/peru_news/main/data/summary/").concat(c,".json"),e.next=7,p.a.get(r);case 7:if(a=e.sent,s=a.data,200===(i=a.status)){e.next=12;break}throw new Error("status: ".concat(i));case 12:return e.abrupt("return",v(s));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=n(32),N=Object(y.a)((function(e,t){return{data:[],selectedWord:"",add:function(t){return e((function(e){return e.data.indexOf(t)>-1?{}:{data:e.data.concat(t)}}))},remove:function(t){return e((function(e){return e.data.indexOf(t)>-1?{data:e.data.filter((function(e){return e!==t}))}:{}}))},isActive:function(e){return t().data.indexOf(e)>-1},setSelectedWord:function(t){return e({selectedWord:t})}}})),w=function(e){return Object(d.a)(Object(j.a)(e,"yyyyMMdd",new Date),"dd/MM/Y")},M=function(e){var t=e.date,n=e.load,a=e.className,s=void 0===a?"":a,i=Object(o.c)(["data",{date:t}],g,f),u=i.isError,l=i.isLoading,d=i.isSuccess,j=i.refetch,b=N(function(e){return function(t){return{addDate:function(){return t.add(e)},removeDate:function(){return t.remove(e)},isActive:t.isActive(e)}}}(t)),m=b.addDate,O=b.removeDate,h=b.isActive,x=Object(r.useCallback)((function(){h||u?O():d&&m()}),[h,u,O,d,m]),p=Object(r.useCallback)((function(){if(d)x();else{if(l)return;j().then((function(e){e&&m()}))}}),[m,l,d,j,x]);return Object(r.useEffect)((function(){n&&p()}),[n]),u?null:Object(c.jsx)("div",{className:"".concat(s," p-2 transition cursor-pointer ").concat(h?"bg-green-600 text-gray-50":"bg-gray-300"," ").concat(l?"animate-pulse":""),onClick:function(){return p()},children:Object(c.jsx)("p",{className:"font-semibold pointer-events-none",children:w(t)})})},k=function(e){var t=e.n,n=e.loadN,r=Array(t).fill(0).map((function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(l.a)(new Date,{days:e});return Object(d.a)(t,"YMMdd")}(-t)}));return Object(c.jsx)("div",{className:"-mt-2 -ml-2 flex flex-wrap",children:r.map((function(e,t){return Object(c.jsx)(M,{className:"mt-2 ml-2",date:e,load:t<n},t)}))})},C=function(e){var t=e.className,n=null!==t&&void 0!==t?t:"h-5 w-5";return Object(c.jsxs)("svg",{className:"animate-spin mr-3 ".concat(n),fill:"none",viewBox:"0 0 24 24",children:[Object(c.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),Object(c.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},W=function(e){return{selectedWord:e.selectedWord,setSelectedWord:e.setSelectedWord}},D=function(e){var t=e.data,n=N(W),a=n.selectedWord,s=n.setSelectedWord,i=Object(r.useMemo)((function(){return t.map((function(e){var t=Object(h.a)(e,2);t[0];return t[1]})).reduce((function(e,t){return Math.max(e,t)}))}),[t]);return Object(c.jsx)("div",{className:"flex flex-col space-y-1",children:t.map((function(e,t){var n=Object(h.a)(e,2),r=n[0],o=n[1];return Object(c.jsxs)("div",{className:"relative flex items-center h-8",onClick:function(){return function(e){s(a!==e?e:"")}(r)},children:[Object(c.jsxs)("p",{className:"absolute pl-2 pointer-events-none ".concat(a===r?"font-semibold":""),children:[r," (",o,")"]}),Object(c.jsx)("div",{className:"h-full transition-all duration-300 ".concat(a===r?"bg-blue-400":"bg-blue-200"),style:{width:"".concat(100*o/i,"%")}})]},t)}))})},A=function(e){return e.data},E=function(e){var t=e.topk,n=N(A),a=Object(o.d)(),s=Object(r.useMemo)((function(){var e=new Map;return n.map((function(e){return a.getQueryData(["data",{date:e}])})).forEach((function(t){t&&t.forEach((function(t){var n,c=Object(h.a)(t,2),r=c[0],a=c[1],s=null!==(n=e.get(r))&&void 0!==n?n:new Map;a.forEach((function(e){var t,n=Object(h.a)(e,2),c=n[0],r=n[1];s.set(c,(null!==(t=s.get(c))&&void 0!==t?t:0)+r)})),e.set(r,s)}))})),Array.from(e).map((function(e){var n=Object(h.a)(e,2),c=n[0],r=n[1];return[c,Array.from(r).sort((function(e,t){return t[1]-e[1]})).slice(0,t)]}))}),[a,n,t]);return Object(c.jsx)("div",{className:"mt-2",children:0===s.length?Object(c.jsx)("div",{className:"mt-10 flex justify-center",children:Object(c.jsx)(C,{className:"h-14 w-14 text-gray-500"})}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("p",{className:"font-semibold",children:["Loaded data: ",n.length]}),Object(c.jsx)("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:s.map((function(e,t){var n=Object(h.a)(e,2),r=n[0],a=n[1];return Object(c.jsxs)("div",{className:"px-4 py-2 bg-blue-50",children:[Object(c.jsx)("p",{className:"capitalize text-lg font-semibold",children:r.replace("_"," ")}),Object(c.jsx)("div",{className:"my-2",children:Object(c.jsx)(D,{data:a})})]},t)}))})]})})},S=new o.a,F=function(){return Object(c.jsxs)(o.b,{queryCache:S,children:[Object(c.jsxs)("div",{className:"m-4",children:[Object(c.jsx)(k,{n:10,loadN:5}),Object(c.jsx)(E,{topk:10})]}),Object(c.jsx)(u.ReactQueryDevtools,{initialIsOpen:!0})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,63)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};n(58);i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(F,{})}),document.getElementById("root")),L()}},[[59,1,2]]]);
//# sourceMappingURL=main.2e9ab1a6.chunk.js.map